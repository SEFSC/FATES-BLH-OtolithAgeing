[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Menhaden Ageing Model",
    "section": "",
    "text": "This Menhaden Ageing Model provides an innovative method for automatically estimating Menhaden age using scale images. Built upon state-of-the-art deep learning algorithms, it enables rapid generation of fish age predictions by simply pointing to a directory containing magnified images of scale samples."
  },
  {
    "objectID": "index.html#about",
    "href": "index.html#about",
    "title": "Menhaden Ageing Model",
    "section": "About",
    "text": "About\nThe internal workflow is as follows:\n\nRaw images are first converted to grayscale such that every image pixel contains a value [0, 255]. These grayscale images are then processed using binary thresholding image processing techniques by which all pixels whose values are above a certain threshold are set to 1 while the rest are set to 0. This allows the scale itself to be distinguished from the image background. The threshold value used for menhaden, based on trail and error, is 100.\nImperfections in the new masked images are cleaned up using morphological opening and closing techniques to remove undesired background noise and capture any missed portions of the scale.\nThe contours of the masked shape are identified in order to extract the object of interest (i.e., the scale).\nThe scale is then cropped out of the original image and padded to make it square.\nThe new square image containing just the scale of interest is passed to a trained custom residual neural network (resnet) deep learning classification model. Model output is saved to a CSV file.\n\nImplementation instructions follow. Be sure to set up and configure a Python environment before the first use."
  },
  {
    "objectID": "index.html#usage",
    "href": "index.html#usage",
    "title": "Menhaden Ageing Model",
    "section": "Usage",
    "text": "Usage\nThe full model is wrapped inside a single Python script called Scale_Aging_Inference_Script_Image_Only.py. To execute, run the following command in a command line terminal:\npython Scale_Aging_Inference_Script_Image_Only.py &lt;img_dir&gt; &lt;csv_dir&gt; &lt;model_dir&gt;\nwhere\n\n\n\n\n\n\n\n&lt;img_dir&gt;\n(str) full path to the directory containing the scale images to process\n\n\n&lt;csv_dir&gt;\n(str) full path to desired directory to which the CSV output will be written\n\n\n&lt;model_dir&gt;\n(str) full path to the directory containing the trained model weights (i.e., the best_model.pth file)\n\n\n\n For more information, including an execution example, see Using the Model in the docs."
  },
  {
    "objectID": "index.html#options",
    "href": "index.html#options",
    "title": "Menhaden Ageing Model",
    "section": "Options",
    "text": "Options\nNo options are available at this time. All arguments above are currently required."
  },
  {
    "objectID": "index.html#dependencies",
    "href": "index.html#dependencies",
    "title": "Menhaden Ageing Model",
    "section": "Dependencies",
    "text": "Dependencies\n\nAnaconda (for virtual environment implementation)\nGit CLI (for repository cloning)\nPython &gt;= 3.9\ntorch ==1.12.1\ntorchvision == 0.13.1\ntorchaudio == 0.12.1\nopencv-python\npandas\ntqdm\n\n\nRecommendations\n\nmatplotlib (data plotting in Python)\njupyter (viewing Jupyter notebook demonstrations provided in the GitHub repo)\n\nSee Getting Started for installation and setup instructions."
  },
  {
    "objectID": "index.html#release-notes",
    "href": "index.html#release-notes",
    "title": "Menhaden Ageing Model",
    "section": "Release Notes",
    "text": "Release Notes\n\n\n Version History \n\n\n\n2025.0.1 (BETA) (May 2025): Initial version for testing with the following functionality:\n\n\nRun via command line with image, output, and model directories passed as required arguments\n\n\n\n\n\n\n\n\n\n\n\nLicense\n\n\n\nSoftware code created by U.S. Government employees is not subject to copyright in the United States (17 U.S.C. §105). The United States/Department of Commerce reserve all rights to seek and obtain copyright protection in countries other than the United States for Software authored in its entirety by the Department of Commerce. To this end, the Department of Commerce hereby grants to Recipient a royalty-free, nonexclusive license to use, copy, and create derivative works of the Software outside of the United States.\n\n\n\n\n\n\n\n\nDisclaimer\n\n\n\nThis software is a scientific product and is not official communication of the National Oceanic and Atmospheric Administration, or the United States Department of Commerce. All NOAA software and project code is provided on an “as is” basis and the user assumes responsibility for its use. Any claims against the Department of Commerce or Department of Commerce bureaus stemming from the use of this software will be governed by all applicable Federal law. Any reference to specific commercial products, processes, or services by service mark, trademark, manufacturer, or otherwise, does not constitute or imply their endorsement, recommendation or favoring by the Department of Commerce. The Department of Commerce seal and logo, or the seal and logo of a DOC bureau, shall not be used in any manner to imply endorsement of any commercial product or activity by DOC or the United States Government."
  },
  {
    "objectID": "content/docs/mount.html",
    "href": "content/docs/mount.html",
    "title": "Mounting a Drive",
    "section": "",
    "text": "If the data to be processed are stored on a remote drive somewhere, such as in Google Shared Drive, that drive must first be “mounted” in order for it to be accessible via the operating system’s file system. The Google Drive application, which is already installed on the Advanced Technology GPU machine, makes accessing personal Google drives and Google shared drives easy. One must, however, log in to authenticate access.\nSimply double click the Google Drive icon on the desktop and log in as normal. When asked to authenticate with two factor authentication, plug your Yubikey into your local computer and authenticate as usual. The authentication will be passed to the remote machine. Once done, your Google drive will appear in File Explorer as the “G” drive.\nOther drives, such as each lab’s on-prem shared storage drives, are already mapped and are also accessible by their corresponding drive letters.\nThe example in Using the Model illustrates how to access data stored in a Google shared drive.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model",
      "Mounting a Drive"
    ]
  },
  {
    "objectID": "content/docs/setup.html",
    "href": "content/docs/setup.html",
    "title": "Getting Started",
    "section": "",
    "text": "Note\n\n\n\nThe instructions on this page only need to be carried out once. If you have already installed the required dependencies and created a virtual environment, skip ahead to Using the Model.\n\n\nMuch of the following is carried out using command line. In the instructions below, “command line terminal” or “terminal” refer to any command line application for the given operating system. For Windows, this is commonly Command Prompt or Windows Powershell. These use DOS commands. For UNIX users, Git Bash is a good alternative; it is included in Git for Windows and allows UNIX commands to be used instead of DOS.\n\nSoftware Installation\n\ngit\nIf the Git CLI is already installed, there should be a Git Bash program in your Applications. If so, open this program and verify everything is working by typing\ngit --version\nThis should display the version of git installed on the system.\n\n\n\n\n\n\nNote\n\n\n\nThis should already be installed for all users on the Advanced Technology GPU machine.\n\n\nIf needed, download and install the Git CLI before continuing. This does not need administrative privileges to install at the user level. Confirm that it has been installed by opening a command line terminal and entering git --version.\n\n\nconda\nDownload and install Anaconda.\n\n\n\n\n\n\nNote\n\n\n\nThis is already installed on the Advanced Technology GPU machine, but it may need to be set up for each user. Keep reading to learn more.\n\n\nVerify installation and configuration of Anaconda using a command line terminal:\nconda --version\nIf Anaconda is configured properly, this should print the version of the installed software. If, instead, it returns a “command not found” error, and you know Anaconda has been installed, you most likely need to add Conda to your path variables so that your operating system knows where to find it. First, find where it was installed, and then, in Windows:\n\nIn the Windows taskbar, search for “environment” and select “Edit environmental variables for your account”\nIn the top panel of the window that opens, click the “Path” user variable, then select “Edit…”.\nYou need to add two new paths, one at a time. Click “New” and enter the full path (starting with “C:\") of the directory containing Anaconda. This may, for example, be C:\\Users\\user.name\\AppData\\Local\\anaconda3, if installed at the user level (where user.name is your user name), or C:\\ProgramData\\anaconda3 if installed for all users.\nRepeat step 3 with the same path but with \\Scripts\\ appended to the end. For example, C:\\ProgramData\\anaconda3\\Scripts\\.\nClick Ok (twice) to save and exit Settings.\n\nClose and reopen your command line terminal. Then type conda init to initialize Anaconda. Finally, try the conda --version command again. It should work now.\n\n\n\nClone the Repository\nThe model code is available on GitHub. To retrieve it:\n\nOpen a terminal window and change directories (cd) to wherever you want the code to reside. For example,\ncd Documents/ageing\n\n\n\n\n\n\nImportant\n\n\n\nMake sure the directory exists before trying to navigate into it. You cannot move into a non-existent folder.\n\n\nClone the repository into the desired directory\ngit clone https://github.com/MattGrossi-NOAA/FATES-BLH-ScaleAgeing .\nif you want all of the repo contents in the current directory, or\ngit clone https://github.com/MattGrossi-NOAA/FATES-BLH-ScaleAgeing\nif you want the repo contents to be downloaded into a new subdirectory called FATES-BLH-ScaleAgeing. This is just personal preference. (Note the difference between the two commands is the dot . at the end.)\n\n\n\nCreate a Virtual Environment\nVirtual environments are used to manage Python packages. Create a virtual environment specifically for this model. In a terminal window, navigate into the directory containing the model code (from the previous step). Then:\nconda env create --name scaleageing --file=environment.yml\nThis command creates a virtual environment called scaleageing and downloads and installs all of the package dependencies listed in the environment.yml file contained in the repo.\nNote that this virtual environment can be named anything at all, but remember what you call it – and keep it simple – because it will be invoked by name each time you use the model.\nCongratulations! Now that your environment is set up – and this only needs to be done once, the first time – we are ready to start using the model.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model",
      "Getting Started"
    ]
  },
  {
    "objectID": "content/docs/acknowledgements.html",
    "href": "content/docs/acknowledgements.html",
    "title": "Acknowledgments",
    "section": "",
    "text": "This model was created by Aotian Zheng at the University of Washington Information Processing Lab in cooperation with and supported by the NOAA Southeast Fisheries Science Center Fisheries Assessment, Technology, and Engineering Support Division.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model",
      "Acknowledgments"
    ]
  },
  {
    "objectID": "content/docs/usage.html",
    "href": "content/docs/usage.html",
    "title": "Using the Model",
    "section": "",
    "text": "Running the Menhaden Ageing Model is straightforward and only requires one command. You will, however, need three things on hand:\n\nThe directory containing the scale images to process\nThe directory where you want the model output file to be written\nThe directory containing the trained model weights (i.e., the best_model.pth file). If you simply cloned the repo and have not moved anything around, this file will be alongside the model script in the scripts subdirectory in the cloned repository.\n\nFirst we need to activate the virtual environment we previously configured. In a terminal window, type:\nconda activate scaleageing\n\n\n\n\n\n\nTip\n\n\n\nIf you named your virtual environment something other than “scaleageing”, invoke that name instead.\n\n\nNavigate into the directory containing the Scale_Aging_Inference_Script_Image_Only.py script. If you simply cloned the repo and have not moved anything around, this will in the scripts subdirectory in the cloned repository.\nRun the model as described in the usage instructions:\npython Scale_Aging_Inference_Script_Image_Only.py &lt;img_dir&gt; &lt;csv_dir&gt; &lt;model_dir&gt;\nwhere &lt;img_dir&gt; is the full path to the directory containing the scale images to process (#1 above), &lt;csv_dir&gt; is the full path to desired directory to which the CSV output will be written (#2 above), and &lt;model_dir&gt; is the full path to the directory containing the best_model.pth model weights (#3 above).\n\nAn Example\nDirectories are handled slightly differently in DOS (Windows Command Prompt, Powershell) than UNIX (Git Bash). For example, running on the Advanced Technology GPU machine might to process 2024 menhaden data might look like this:\n\nGit Bash\npython Scale_Aging_Inference_Script_Image_Only.py \"G:/Shared drives/NMFS SEFSC FATES Advanced Technology/BIOLOGY_LIFE_HISTORY_DATA/Atlantic menhaden to be tested w active learning/subset\" \"G:/Shared drives/NMFS SEFSC FATES Advanced Technology/BIOLOGY_LIFE_HISTORY_DATA/Atlantic menhaden to be tested w active learning/model_age_predictions\" \"C:/Users/user.name/Documents/GitHubRepos/FATES-BLH-ScaleAgeing/scripts\"\n\n\nCommand Prompt\npython Scale_Aging_Inference_Script_Image_Only.py “G:\\Shared drives\\NMFS SEFSC FATES Advanced Technology\\BIOLOGY_LIFE_HISTORY_DATA\\Atlantic menhaden to be tested w active learning\\subset” “C:\\Shared drives\\NMFS SEFSC FATES Advanced Technology\\BIOLOGY_LIFE_HISTORY_DATA\\Atlantic menhaden to be tested w active learning\\model_age_predictions” “C:\\Users\\user.name\\Documents\\GitHubRepos\\FATES-BLH-ScaleAgeing\\scripts”",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model",
      "Using the Model"
    ]
  },
  {
    "objectID": "content/docs/index.html",
    "href": "content/docs/index.html",
    "title": "Menhaden Ageing Model",
    "section": "",
    "text": "This Menhaden Ageing Model provides an innovative method for automatically estimating Menhaden age using scale images. Built upon state-of-the-art deep learning algorithms, it enables rapid generation of fish age predictions by simply pointing to a directory containing magnified images of scale samples.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model"
    ]
  },
  {
    "objectID": "content/docs/index.html#about",
    "href": "content/docs/index.html#about",
    "title": "Menhaden Ageing Model",
    "section": "About",
    "text": "About\nThe internal workflow is as follows:\n\nRaw images are first converted to grayscale such that every image pixel contains a value [0, 255]. These grayscale images are then processed using binary thresholding image processing techniques by which all pixels whose values are above a certain threshold are set to 1 while the rest are set to 0. This allows the scale itself to be distinguished from the image background. The threshold value used for menhaden, based on trail and error, is 100.\nImperfections in the new masked images are cleaned up using morphological opening and closing techniques to remove undesired background noise and capture any missed portions of the scale.\nThe contours of the masked shape are identified in order to extract the object of interest (i.e., the scale).\nThe scale is then cropped out of the original image and padded to make it square.\nThe new square image containing just the scale of interest is passed to a trained custom residual neural network (resnet) deep learning classification model. Model output is saved to a CSV file.\n\nImplementation instructions follow. Be sure to set up and configure a Python environment before the first use.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model"
    ]
  },
  {
    "objectID": "content/docs/index.html#usage",
    "href": "content/docs/index.html#usage",
    "title": "Menhaden Ageing Model",
    "section": "Usage",
    "text": "Usage\nThe full model is wrapped inside a single Python script called Scale_Aging_Inference_Script_Image_Only.py. To execute, run the following command in a command line terminal:\npython Scale_Aging_Inference_Script_Image_Only.py &lt;img_dir&gt; &lt;csv_dir&gt; &lt;model_dir&gt;\nwhere\n\n\n\n\n\n\n\n&lt;img_dir&gt;\n(str) full path to the directory containing the scale images to process\n\n\n&lt;csv_dir&gt;\n(str) full path to desired directory to which the CSV output will be written\n\n\n&lt;model_dir&gt;\n(str) full path to the directory containing the trained model weights (i.e., the best_model.pth file)\n\n\n\n For more information, including an execution example, see Using the Model in the docs.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model"
    ]
  },
  {
    "objectID": "content/docs/index.html#options",
    "href": "content/docs/index.html#options",
    "title": "Menhaden Ageing Model",
    "section": "Options",
    "text": "Options\nNo options are available at this time. All arguments above are currently required.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model"
    ]
  },
  {
    "objectID": "content/docs/index.html#dependencies",
    "href": "content/docs/index.html#dependencies",
    "title": "Menhaden Ageing Model",
    "section": "Dependencies",
    "text": "Dependencies\n\nAnaconda (for virtual environment implementation)\nGit CLI (for repository cloning)\nPython &gt;= 3.9\ntorch ==1.12.1\ntorchvision == 0.13.1\ntorchaudio == 0.12.1\nopencv-python\npandas\ntqdm\n\n\nRecommendations\n\nmatplotlib (data plotting in Python)\njupyter (viewing Jupyter notebook demonstrations provided in the GitHub repo)\n\nSee Getting Started for installation and setup instructions.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model"
    ]
  },
  {
    "objectID": "content/docs/index.html#release-notes",
    "href": "content/docs/index.html#release-notes",
    "title": "Menhaden Ageing Model",
    "section": "Release Notes",
    "text": "Release Notes\n\n\n Version History \n\n\n\n2025.0.1 (BETA) (May 2025): Initial version for testing with the following functionality:\n\n\nRun via command line with image, output, and model directories passed as required arguments\n\n\n\n\n\n\n\n\n\n\n\nLicense\n\n\n\nSoftware code created by U.S. Government employees is not subject to copyright in the United States (17 U.S.C. §105). The United States/Department of Commerce reserve all rights to seek and obtain copyright protection in countries other than the United States for Software authored in its entirety by the Department of Commerce. To this end, the Department of Commerce hereby grants to Recipient a royalty-free, nonexclusive license to use, copy, and create derivative works of the Software outside of the United States.\n\n\n\n\n\n\n\n\nDisclaimer\n\n\n\nThis software is a scientific product and is not official communication of the National Oceanic and Atmospheric Administration, or the United States Department of Commerce. All NOAA software and project code is provided on an “as is” basis and the user assumes responsibility for its use. Any claims against the Department of Commerce or Department of Commerce bureaus stemming from the use of this software will be governed by all applicable Federal law. Any reference to specific commercial products, processes, or services by service mark, trademark, manufacturer, or otherwise, does not constitute or imply their endorsement, recommendation or favoring by the Department of Commerce. The Department of Commerce seal and logo, or the seal and logo of a DOC bureau, shall not be used in any manner to imply endorsement of any commercial product or activity by DOC or the United States Government.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model"
    ]
  },
  {
    "objectID": "content/docs/suggestions.html",
    "href": "content/docs/suggestions.html",
    "title": "Next Steps",
    "section": "",
    "text": "Naming conventions\nThe example execution commands illustrate the importance of giving careful consideration to file and folder names. For example, the script name Scale_Ageing_Inference_Script_Image_Only.py is difficult and time-consuming to type, both due its length and its use of capital letters and underscores, both of which require using two keys. While using the shift key may seem trivial, it can quickly become an annoyance when repeatedly tying commands.\nIt is therefore recommended that the name of the script be shortened. An example might be inference-images.py.\nSimilarly, long directory names are equally burdensome to type. Even more annoying is having to handle special characters (including spaces), since different operating systems handle them differently. Special characters are even trickier because they would need to be handled properly in the code. It is best to avoid them altogether.\nIn general, best practice is to avoid spaces and special characters altogether in both file and directory names. Consider using camelCase instead, where the first letter of each word (except the first word) is capitalized. Underscores and dashes are also commonly used in directory names. These are less frowned-upon than spaces because they do not need to be escaped.\n\n\nAdditional scripts\nAdditional scripts, such as training scripts, should be added to the repo and this documentation once available.\n\n\nDemonstration notebooks\nOnce complete, Jupyter notebooks demonstrating the model may be added to this documentation.",
    "crumbs": [
      "Read the Docs",
      "Menhaden Ageing Model",
      "Next Steps"
    ]
  }
]